/* Prject: AZARDI Learning Library Interactive Now (All-IN)
Module: Long Arithmetic
Created by: Milan Bishwakarma
Version: 0.1
© Copyright 2013 Infogrid Pacific. All rights reserved.
*/
var AIEL=AIEL||{};var carry=0;AIEL.LongArithmetic={config:{},report:{},apdata:{},isReport:false,init:function(){AIEL.LongArithmetic.setUserConfig();AIEL.LongArithmetic.getDocumentReady();AIEL.LongArithmetic.eventHandlers();AIEL.LongArithmetic.CheckOperatorType();AIEL.LongArithmetic.keyboardEnterNavigation();AIEL.LongArithmetic.loadAPanswer();AIEL.LongArithmetic.trimAPTextEntryFields()},CheckOperatorType:function(a){switch(a){case"addition":AIEL.LongArithmetic.SimpleAddition(a);break;case"subtraction":AIEL.LongArithmetic.SimpleSubtraction(a);break;case"multiplication":AIEL.LongArithmetic.SimpleMultiplication(a);break;case"division":AIEL.LongArithmetic.SimpleDivision(a);break}},GenerateRanNums:function(a){if(AIEL.LongArithmetic.config[a].type=="addition"){AIEL.LongArithmetic.SimAddRanNum(a)}else{if(AIEL.LongArithmetic.config[a].type=="subtraction"){AIEL.LongArithmetic.SimSubRanNum(a)}else{if(AIEL.LongArithmetic.config[a].type=="multiplication"){AIEL.LongArithmetic.SimMulRanNum(a)}else{if(AIEL.LongArithmetic.config[a].type=="division"){AIEL.LongArithmetic.SimDivRanNum(a)}}}}},SimpleAddition:function(a){AIEL.LongArithmetic.SimAddRanNum();AIEL.LongArithmetic.config[ParID].type=a},SimAddRanNum:function(c){if(!AIEL.LongArithmetic.config[c].custom){var b=Math.round(Math.random()*parseFloat(AIEL.LongArithmetic.config[c].range-AIEL.LongArithmetic.config[c].fromrange))+parseFloat(AIEL.LongArithmetic.config[c].fromrange);var a=Math.round(Math.random()*parseFloat(AIEL.LongArithmetic.config[c].range-AIEL.LongArithmetic.config[c].fromrange))+parseFloat(AIEL.LongArithmetic.config[c].fromrange);AIEL.LongArithmetic.config[c].a=b;AIEL.LongArithmetic.config[c].b=a}},SimpleSubtraction:function(a){AIEL.LongArithmetic.SimSubRanNum();AIEL.LongArithmetic.config[ParID].type=a},SimSubRanNum:function(d){if(!AIEL.LongArithmetic.config[d].custom){var e=Math.round(Math.random()*parseFloat(AIEL.LongArithmetic.config[d].range-AIEL.LongArithmetic.config[d].fromrange+1))+parseFloat(AIEL.LongArithmetic.config[d].fromrange);var b=Math.round(Math.random()*parseFloat(e-AIEL.LongArithmetic.config[d].fromrange-1))+parseFloat(AIEL.LongArithmetic.config[d].fromrange);if(b>e){var c=b;var a=e;e=c;b=a}AIEL.LongArithmetic.config[d].a=e;AIEL.LongArithmetic.config[d].b=b}},SimpleMultiplication:function(a){AIEL.LongArithmetic.SimMulRanNum();AIEL.LongArithmetic.config[ParID].type=a},SimMulRanNum:function(c){if(!AIEL.LongArithmetic.config[c].custom){var b=Math.round(Math.random()*parseFloat(AIEL.LongArithmetic.config[c].multiplicandrange.split("-")[1]-AIEL.LongArithmetic.config[c].multiplicandrange.split("-")[0]))+parseFloat(AIEL.LongArithmetic.config[c].multiplicandrange.split("-")[0]);var a=Math.round(Math.random()*parseFloat(AIEL.LongArithmetic.config[c].multiplierrange.split("-")[1]-AIEL.LongArithmetic.config[c].multiplierrange.split("-")[0]))+parseFloat(AIEL.LongArithmetic.config[c].multiplierrange.split("-")[0]);AIEL.LongArithmetic.config[c].a=b;AIEL.LongArithmetic.config[c].b=a}},SimpleDivision:function(a){AIEL.LongArithmetic.SimDivRanNum();AIEL.LongArithmetic.config[ParID].type=a},SimDivRanNum:function(b){if(!AIEL.LongArithmetic.config[b].custom){var a=a=Math.floor(Math.random()*parseFloat(AIEL.LongArithmetic.config[b].dividendrange.split("-")[1]-AIEL.LongArithmetic.config[b].dividendrange.split("-")[0]))+parseFloat(AIEL.LongArithmetic.config[b].dividendrange.split("-")[0]);var c=c=Math.floor(Math.random()*parseFloat(AIEL.LongArithmetic.config[b].divisorrange.split("-")[1]-AIEL.LongArithmetic.config[b].divisorrange.split("-")[0]))+parseFloat(AIEL.LongArithmetic.config[b].divisorrange.split("-")[0]);AIEL.LongArithmetic.config[b].a=a;AIEL.LongArithmetic.config[b].b=c}},RenderRanNum:function(a){if(AIEL.LongArithmetic.config[a].type=="addition"){var b='<span class="addend">'+AIEL.LongArithmetic.config[a].a+'</span> <span class="operator add">+</span> <span class="addend">'+AIEL.LongArithmetic.config[a].b+'</span> <span class="operator equal">=</span> <span class="sum">&#8202;</span>';$("#"+a).find(".equation").html(b)}else{if(AIEL.LongArithmetic.config[a].type=="subtraction"){var b='<span class="minuend">'+AIEL.LongArithmetic.config[a].a+'</span> <span class="operator subtract">-</span> <span class="subtrahend">'+AIEL.LongArithmetic.config[a].b+'</span> <span class="operator equal">=</span> <span class="difference">&#8202;</span>';$("#"+a).find(".equation").html(b)}else{if(AIEL.LongArithmetic.config[a].type=="multiplication"){var b='<span class="factor">'+AIEL.LongArithmetic.config[a].a+'</span> <span class="operator multiply">&#xd7;</span> <span class="factor">'+AIEL.LongArithmetic.config[a].b+'</span> <span class="operator equal">=</span> <span class="product" contenteditable="false"></span>';$("#"+a).find(".equation").html(b)}else{if(AIEL.LongArithmetic.config[a].type=="division"){var b='<span class="dividend">'+AIEL.LongArithmetic.config[a].a+'</span> <span class="operator divide">&#247;</span> <span class="divisor">'+AIEL.LongArithmetic.config[a].b+'</span> <span class="operator equal">=</span> <span class="quotient" contenteditable="false">&#8202;</span>';$("#"+a).find(".equation").html(b)}}}}},eventHandlers:function(){$(".arithmetic-i-rw .check").unbind();$(".arithmetic-i-rw .check").click(function(){var a=$(this).parents(".arithmetic-i-rw");AIEL.LongArithmetic.checkAnswers(a)});$(".arithmetic-i-rw .start").unbind();$(".arithmetic-i-rw .start").click(function(){var b=$(this).parents(".arithmetic-i-rw").attr("id");var a=$(this).parents(".arithmetic-i-rw");AIEL.LongArithmetic.Start(b);AIEL.LongArithmetic.randomType(b);AIEL.LongArithmetic.GenerateRanNums(b);AIEL.LongArithmetic.RenderRanNum(b);AIEL.LongArithmetic.evaluate(b);AIEL.LongArithmetic.navStatus(b);AIEL.LongArithmetic.longAddition(b);AIEL.LongArithmetic.longMultiplication(b);AIEL.LongArithmetic.longSubtraction(b);AIEL.LongArithmetic.longDivision(b);AIEL.LongArithmetic.keyboardEnterNavigation();AIEL.LongArithmetic.mobileDevices(b)});$(".arithmetic-i-rw .next").unbind();$(".arithmetic-i-rw .next").click(function(){var a=$(this).parents(".arithmetic-i-rw").attr("id");AIEL.LongArithmetic.navNext(a)});$(".arithmetic-i-rw .result").unbind();$(".arithmetic-i-rw .result").click(function(){var a=$(this).parents(".arithmetic-i-rw");AIEL.LongArithmetic.displayResult(a)});$(".arithmetic-i-rw .reset").unbind();$(document).on("click",".arithmetic-i-rw .reset",function(){$(this).parents(".arithmetic-i-rw").find(".input-cell, .carry").html("&#8202;");$(this).parents(".arithmetic-i-rw").find(".feedback-messages-i-rw").hide();$(this).parents(".arithmetic-i-rw").find(".answer-row").removeClass("correct");$(this).parents(".arithmetic-i-rw").find(".answer-row").removeClass("wrong");carry=0});$(".arithmetic-i-rw .replay").unbind();$(".arithmetic-i-rw .replay").click(function(){var b=$(this).parents(".arithmetic-i-rw").attr("id");var a=$(this).parents(".arithmetic-i-rw");AIEL.LongArithmetic.Start(b);AIEL.LongArithmetic.GenerateRanNums(b);AIEL.LongArithmetic.RenderRanNum(b);AIEL.LongArithmetic.evaluate(b);AIEL.LongArithmetic.navStatus(b);AIEL.LongArithmetic.longAddition(b);AIEL.LongArithmetic.longMultiplication(b);AIEL.LongArithmetic.longSubtraction(b);AIEL.LongArithmetic.longDivision(b);AIEL.LongArithmetic.mobileDevices(b);AIEL.LongArithmetic.keyboardEnterNavigation()});$(".arithmetic-i-rw .home").unbind();$(".arithmetic-i-rw .home").click(function(){var a=$(this).parents(".arithmetic-i-rw").attr("id");AIEL.LongArithmetic.Home(a);AIEL.LongArithmetic.GenerateRanNums(a);AIEL.LongArithmetic.RenderRanNum(a);AIEL.LongArithmetic.navStatus(a)});$(document).unbind("keyup",".arithmetic-i-rw .input-cell");$(document).on("keyup",".arithmetic-i-rw .input-cell",function(){var a=$(this).parents(".arithmetic-i-rw");var b=$(this).parents(".answer-row").text();b=$.trim(b);b=b.replace(/\s+/g,"");AIEL.LongArithmetic.checkAnswersAsKeyEntered(b,a);AIEL.LongArithmetic.isReport=$(this).parents(".arithmetic-i-rw").hasClass("report")?true:false});$(document).off("focus",".arithmetic-i-rw .sum, .arithmetic-i-rw .difference, .arithmetic-i-rw .product, .arithmetic-i-rw .quotient");$(document).on("focus",".arithmetic-i-rw .sum, .arithmetic-i-rw .difference, .arithmetic-i-rw .product, .arithmetic-i-rw .quotient",function(a){var a=$(this).text()});$(document).off("click",".arithmetic-i-rw .clear");$(document).on("click",".arithmetic-i-rw .clear",function(a){$(".sum, .difference, .product, .quotient").html("&#8202")});$(document).off("click",".arithmetic-i-rw .key");$(document).on("click",".arithmetic-i-rw .key",function(){var a=$(this).parents(".arithmetic-i-rw");AIEL.LongArithmetic.handleKeyPadEvent($(this).text(),a,$(this));AIEL.LongArithmetic.isReport=$(this).parents(".arithmetic-i-rw").hasClass("report")?true:false});$(".equation span.input-cell, .equation span.carry").unbind();$(document).on("click",".equation span.input-cell, .equation span.carry",function(){var a=$(this).parents(".arithmetic-i-rw");$(a).find(".equation span").removeClass("selected-aie");$(this).addClass("selected-aie");AIEL.LongArithmetic.isReport=$(this).parents(".arithmetic-i-rw").hasClass("report")?true:false});$(document).off("touchstart",".equation span.input-cell, .equation span.carry");$(document).on("touchstart",".equation span.input-cell, .equation span.carry",function(){var a=$(this).parents(".arithmetic-i-rw");$(a).find(".equation span").removeClass("selected-aie");$(this).addClass("selected-aie");AIEL.LongArithmetic.isReport=$(this).parents(".arithmetic-i-rw").hasClass("report")?true:false});$(document).on("click",".report-header",function(){var a=$(this).attr("data-id");a=$.trim(a);$(this).next("#r"+a).toggle()});$(document).on("click",".report-date",function(){if(!$(this).hasClass("active-report")){var b=$(this).attr("title");b=$.trim(b);var a=$(this).parent(".report-by-date");$(".report, .report-header, .report-block").remove();AIEL.LongArithmetic.loadReportTracker(b,a);$(".report-date").removeClass("active-report");$(this).addClass("active-report");$(".report").hide()}else{$(".report, .report-header, .report-block").remove();$(".report-date").removeClass("active-report")}AIEL.LongArithmetic.keyboardEnterNavigation()});$(document).on("click",".report-home",function(){var a=$(this).attr("title");$(".report, .report-header, .report-marksheet").remove();$(".report-date").removeClass("active-report")});$(document).on("click",".delete-report",function(c){c.stopPropagation();var b=$(this).parents(".report-by-date");var a=$(this).parent("h4.report-date").attr("title");AIEL.LongArithmetic.deleteReport(a,b)});$(document).on("click",".show-report",function(){var a=$(this).parents(".arithmetic-i-rw").attr("id");$("#"+a).hide();$(".arithmetic-report-i-rw").attr("data-return",a).show();$(".report-by-date, .no-report").remove();AIEL.LongArithmetic.displayReportDates()});$(document).on("click",".clear-reports",function(){AIEL.LongArithmetic.clearAllReports()});$(document).on("click",".return-exercise",function(){var a=$(this).parents(".arithmetic-report-i-rw").attr("data-return");$(".arithmetic-report-i-rw").hide();$("#"+a).show()});$(document).on("keyup",".sum-i-rw .sum-rw[contenteditable], .product-i-rw .product-rw[contenteditable], .quotient-i-rw .quotient-rw[contenteditable], .difference-i-rw .difference-rw[contenteditable]",function(){var a=$(this).parents(".arithmetic-rw").attr("id");AIEL.LongArithmetic.checkAPanswer(a)});$(document).on("click",".arithmetic-clear-answer",function(){AIEL.LongArithmetic.deleteAPanswer()});$(document).on("click",".arithmetic-clear-itemanswer",function(){var a=$(this).parents(".arithmetic-rw").attr("id");AIEL.LongArithmetic.deleteAPItemanswer(a)});$(document).on("click",".sum-i-rw .sum-rw[contenteditable]",function(){var a=$(this).parents(".arithmetic-rw").attr("id");AIEL.LongArithmetic.checkAPanswer(a)})},evaluate:function(a){if(AIEL.LongArithmetic.config[a].type=="addition"){AIEL.LongArithmetic.config[a].answer=AIEL.LongArithmetic.config[a].a+AIEL.LongArithmetic.config[a].b}else{if(AIEL.LongArithmetic.config[a].type=="subtraction"){AIEL.LongArithmetic.config[a].answer=AIEL.LongArithmetic.config[a].a-AIEL.LongArithmetic.config[a].b}else{if(AIEL.LongArithmetic.config[a].type=="multiplication"){AIEL.LongArithmetic.config[a].answer=AIEL.LongArithmetic.config[a].a*AIEL.LongArithmetic.config[a].b}else{if(AIEL.LongArithmetic.config[a].type=="division"){AIEL.LongArithmetic.config[a].answer=AIEL.LongArithmetic.config[a].a/AIEL.LongArithmetic.config[a].b}}}}},checkAnswers:function(f,c){var e=$(f).attr("id");var b=$(f).find(".sum.answer-row, .difference.answer-row, .product .answer-row, .quotient").text();if($(f).find(".remainder-cell").is(".remainder-cell")==true){b=$('.quotient .input-cell:not(".remainder-cell")').text()+"."+$(".remainder-cell").text()}b=$.trim(b);b=b.replace(/\s+/g,"");var d;if(b==AIEL.LongArithmetic.config[e].answer){d=true;AIEL.LongArithmetic.config[e].correctScore=AIEL.LongArithmetic.config[e].correctScore+1;AIEL.LongArithmetic.showFeedback(d,f)}else{d=false;AIEL.LongArithmetic.config[e].wrongScore=AIEL.LongArithmetic.config[e].wrongScore+1;AIEL.LongArithmetic.showFeedback(d,f);if(AIEL.LongArithmetic.config[e].type=="division"&&$(f).find(".remainder-cell").is(".remainder-cell")==true){var a=AIEL.LongArithmetic.config[e].answer.toString().split(".")[0];if(a==b.split(".")[0]){$(f).find(".quotient").removeClass("wrong");$(f).find(".quotient").addClass("correct");$(f).find(".quotient .remainder-cell").addClass("wrong")}}}if(!c&&!AIEL.LongArithmetic.isReport&&AIEL.LongArithmetic.config[e].savereport=="wrong"||AIEL.LongArithmetic.config[e].savereport=="all"){AIEL.LongArithmetic.saveReportTracker(e,d)}else{if(!c&&AIEL.LongArithmetic.isReport==true&&d==true){AIEL.LongArithmetic.removeReportItem(e,d)}}},showFeedback:function(d,c){var e=$(c).attr("id");if(d){$(c).find(".feedback-messages-i-rw").show();$(c).find(".feedback-messages-i-rw .correct").show();$(c).find(".feedback-messages-i-rw .wrong").hide();$(c).find(".feedback-messages-i-rw .close-attempt").hide();$(c).find(".build-correct-score span").remove();var a=" <span>"+AIEL.LongArithmetic.config[e].correctScore+"</span>";$(c).find(".build-correct-score").append(a);$(c).find(".sum, .difference, .product, .quotient").addClass("correct");$(c).find(".sum, .difference, .product, .quotient").removeClass("wrong")}else{$(c).find(".feedback-messages-i-rw").show();$(c).find(".feedback-messages-i-rw .correct").hide();$(c).find(".feedback-messages-i-rw .wrong").show();$(c).find(".build-wrong-score span").remove();var b=" <span>"+AIEL.LongArithmetic.config[e].wrongScore+"</span>";$(c).find(".build-wrong-score").append(b);$(c).find(".sum, .difference, .product, .quotient").removeClass("correct");$(c).find(".sum, .difference, .product, .quotient").addClass("wrong")}},displayResult:function(h){var a=$(h).attr("id");$(h).find(".exercise-i-rw").hide();$(h).find(".instruction-i-rw").hide();$(h).find(".result-i-rw").show();$(h).find(".result-i-rw .correct-score span").remove();$(h).find(".result-i-rw .wrong-score span").remove();$(h).find(".result-i-rw .frame-set-count span").remove();$(h).find(".result-i-rw .progress-meter span").remove();var f=" <span>"+AIEL.LongArithmetic.config[a].correctScore+"</span>";$(h).find(".result-i-rw .correct-score").append(f);var d=" <span>"+AIEL.LongArithmetic.config[a].wrongScore+"</span>";$(h).find(".result-i-rw .wrong-score").append(d);var i=" <span>"+AIEL.LongArithmetic.config[a].totalFrame+"</span>";$(h).find(".result-i-rw .frame-set-count").append(i);if(AIEL.LongArithmetic.config[a].correctScore==AIEL.LongArithmetic.config[a].totalFrame){$(h).find(".result-i-rw .correct").show();$(h).find(".result-i-rw .wrong").hide()}else{$(h).find(".result-i-rw .correct").hide();$(h).find(".result-i-rw .wrong").show()}var b=Math.floor((AIEL.LongArithmetic.config[a].correctScore/AIEL.LongArithmetic.config[a].totalFrame)*100);var j=Math.floor((AIEL.LongArithmetic.config[a].wrongScore/AIEL.LongArithmetic.config[a].totalFrame)*100);var c=" <span>"+b+"% / 100%</span>";$(h).find(".result-i-rw .progress-meter").append(c);var e="background: -moz-linear-gradient(left, rgba(0,150,100,1) 0%, rgba(0,150,100,1)"+b+"%, rgba(220,50,0,1)"+b+"%, rgba(220,50,0,1) 100%);";var l="background: -webkit-linear-gradient(left, rgba(0,150,100,1) 0%, rgba(0,150,100,1)"+b+"%, rgba(220,50,0,1)"+b+"%, rgba(220,50,0,1) 100%);";var k=e+l;$(h).find(".stats").attr("style",k);AIEL.LongArithmetic.GenerateRanNums(a);AIEL.LongArithmetic.RenderRanNum(a)},Start:function(b){AIEL.LongArithmetic.config[b].current_frame=1;AIEL.LongArithmetic.config[b].correctScore=0;AIEL.LongArithmetic.config[b].wrongScore=0;$("#"+b).find(".next").removeAttr("disabled");$("#"+b).find(".exercise-i-rw").show();$("#"+b).find(".instruction-i-rw").hide();$("#"+b).find(".result-i-rw").hide();$("#"+b).find(".result").hide();$("#"+b).find(".feedback-messages-i-rw").hide();$("#"+b).find(".build-correct-score span").remove();$("#"+b).find(".build-wrong-score span").remove();$("#"+b).find(".exercise-type span").remove();var a="";if(AIEL.LongArithmetic.config[b].randomtype==true){a="<span>Random</span>"}else{a="<span> "+AIEL.LongArithmetic.config[b].type+"</span>"}$("#"+b).find(".exercise-type").append(a)},Ready:function(a){if(AIEL.LongArithmetic.config[a].type=="random"){AIEL.LongArithmetic.config[a].type="addition";AIEL.LongArithmetic.config[a].randomtype=true}else{}},Home:function(a){AIEL.LongArithmetic.config[a].current_frame=1;AIEL.LongArithmetic.config[a].correctScore=0;AIEL.LongArithmetic.config[a].wrongScore=0;$("#"+a).find(".exercise-i-rw").hide();$("#"+a).find(".instruction-i-rw").show();$("#"+a+" .result-i-rw").hide();$("#"+a+" .feedback-messages-i-rw").hide()},presentationLayout:function(a){if(AIEL.LongArithmetic.config[a].equationDirection=="vertical"){$("#"+a).find(".equation-i-rw").addClass("vertical")}else{$("#"+a).find(".equation-i-rw").removeClass("vertical")}},navStatus:function(b){$("#"+b+" .exercise-status span").remove();var a="<span>"+AIEL.LongArithmetic.config[b].current_frame+" / "+AIEL.LongArithmetic.config[b].totalFrame+"</span>";$("#"+b+" .exercise-status").append(a)},navNext:function(a){carry=0;$("#"+a+" .feedback-messages-i-rw").hide();AIEL.LongArithmetic.config[a].current_frame=AIEL.LongArithmetic.config[a].current_frame+1;if(AIEL.LongArithmetic.config[a].current_frame==AIEL.LongArithmetic.config[a].totalFrame){$("#"+a+" .next").attr("disabled","disabled");$("#"+a+" .result").show()}AIEL.LongArithmetic.randomType(a);AIEL.LongArithmetic.GenerateRanNums(a);AIEL.LongArithmetic.RenderRanNum(a);AIEL.LongArithmetic.evaluate(a);AIEL.LongArithmetic.navStatus(a);AIEL.LongArithmetic.longAddition(a);AIEL.LongArithmetic.longMultiplication(a);AIEL.LongArithmetic.longSubtraction(a);AIEL.LongArithmetic.longDivision(a);AIEL.LongArithmetic.keyboardEnterNavigation();AIEL.LongArithmetic.mobileDevices(a);$("#"+a).find(".sum, .difference, .product, .quotient").focus()},checkAnswersAsKeyEntered:function(c,e){var d=$(e).attr("id");var b=c.length;if(AIEL.LongArithmetic.config[d].type=="division"&&$("#"+d).find(".remainder-cell").is(".remainder-cell")==true){b=b+1}var a=AIEL.LongArithmetic.config[d].answer.toString().length;if(b==a||b>a){AIEL.LongArithmetic.checkAnswers(e);if(AIEL.LongArithmetic.config[d].current_frame!=AIEL.LongArithmetic.config[d].totalFrame&&AIEL.LongArithmetic.config[d].custom==false){if(AIEL.LongArithmetic.config[d].autoNavigate==true){setTimeout(function(){AIEL.LongArithmetic.navNext(d)},1000)}}else{if(AIEL.LongArithmetic.config[d].current_frame==AIEL.LongArithmetic.config[d].totalFrame&&AIEL.LongArithmetic.config[d].custom==false){setTimeout(function(){AIEL.LongArithmetic.displayResult(e)},1000)}}}},generateKeyPad:function(f){if(AIEL.LongArithmetic.config[f].keypad==true){$("#"+f).find(".keypad").remove();if(AIEL.LongArithmetic.config[f].keypadType=="calculator"){var c=[1,2,3,0];var b=[4,5,6];var a=[7,8,9];var e='<div class="keypad" />';$("#"+f).find(".equation-i-rw").append(e);$.each(a,function(h){var i='<span class="key">'+a[h]+"</span>";$("#"+f).find(".keypad").append(i)});$.each(b,function(h){var i='<span class="key">'+b[h]+"</span>";$("#"+f).find(".keypad").append(i)});$.each(c,function(h){var i='<span class="key">'+c[h]+"</span>";$("#"+f).find(".keypad").append(i)});var d='<span class="clear">x</span>';$("#"+f).find(".keypad").append(d);$("#"+f+" .keypad").removeClass("integer").addClass("calculator")}else{var g=[1,2,3,4,5,6,7,8,9,0];var e='<div class="keypad" />';$("#"+f).find(".equation-i-rw").append(e);$.each(g,function(h){var i='<span class="key">'+g[h]+"</span>";$("#"+f).find(".keypad").append(i)});var d='<span class="clear">x</span>';$("#"+f).find(".keypad").append(d);$("#"+f).find(".keypad").addClass("integer").removeClass("calculator")}}},handleKeyPadEvent:function(c,d,i){var b=$(d).attr("id");if(AIEL.LongArithmetic.config[b].type=="addition"){var b=$(d).attr("id");var g=0;g=$(d).find(".equation span.selected-aie").attr("tabindex");$(d).find(".equation span.input-cell.selected-aie, .equation .carry.selected-aie").text(c);if($(d).find(".equation .carry-block span.selected-aie").text()){carry=parseInt($(d).find(".equation .carry-block span.selected-aie").text())}if($(d).find(".equation .sum span").hasClass("selected-aie")){var e=0;for(x in AIEL.LongArithmetic.addend[b]){e=e+parseInt(AIEL.LongArithmetic.addend[b][x][g])}var f=$(d).text().length;if(e+carry>9&&f>0){$(d).find(".equation .sum span").removeClass("selected-aie");$(d).find('.carry-block span[tabindex="'+(g-1)+'"]').addClass("selected-aie").focus();$(d).find('.carry-block span[tabindex="'+(g-1)+'"]').removeClass("disabled")}else{if(f>0){$(d).find(".equation .sum span.selected-aie").prev().addClass("selected-aie").focus();$(d).find(".equation .sum span.selected-aie").next().removeClass("selected-aie")}}}else{var f=$(d).text().length;if(f>0){$(d).find(".equation .carry-block span").removeClass("selected-aie");$(d).find('.sum span[tabindex="'+(g)+'"]').addClass("selected-aie").focus()}}}else{if(AIEL.LongArithmetic.config[b].type=="multiplication"){$(d).find(".equation span.input-cell.selected-aie").text(c);var h=$(d).find(".equation span.input-cell.selected-aie").text().length;var j=parseInt($(d).find(".product-row span.input-cell.selected-aie").parent(".product-row").attr("tabindex"));if(h>0){$(".equation .product span.selected-aie").prev().addClass("selected-aie").focus();$(".equation .product span.selected-aie").next().removeClass("selected-aie")}if($(d).find("span.input-cell.selected-aie").is(":first-child")&&$("span.input-cell.selected-aie:first-child").text()>1){$(d).find(".equation .product-row .input-cell").removeClass("selected-aie");$(d).find(".equation .product .row"+(j+1)+" .input-cell:last").addClass("selected-aie").focus()}}else{if(AIEL.LongArithmetic.config[b].type=="subtraction"){$(d).find(".equation span.input-cell.selected-aie").text(c);var h=$(d).find(".equation span.input-cell.selected-aie");if(h.length>0){$(d).find(".equation .difference span.input-cell.selected-aie").prev().addClass("selected-aie").focus();$(d).find(".equation .difference span.input-cell.selected-aie").next().removeClass("selected-aie")}}else{if(AIEL.LongArithmetic.config[b].type=="division"){$(d).find(".equation span.input-cell.selected-aie").text(c);var h=$(d).find(".equation span.input-cell.selected-aie");if(h.length>0){$(d).find(".equation .divisor-row span.input-cell.selected-aie").prev().addClass("selected-aie").focus();$(d).find(".equation .divisor-row span.input-cell.selected-aie").next().removeClass("selected-aie")}}}}}var a=$(d).find(".answer-row").text();a=$.trim(a);a=a.replace(/\s+/g,"");AIEL.LongArithmetic.checkAnswersAsKeyEntered(a,d)},randomType:function(c){if(AIEL.LongArithmetic.config[c].randomtype==true){var a=["addition","subtraction","multiplication","division"];var b=a[Math.round(Math.random()*3)];AIEL.LongArithmetic.config[c].type=b}},setUserConfig:function(){$(".arithmetic-i-rw .exercise-i-rw.equation-i-rw").each(function(){var a=$(this).parents(".arithmetic-i-rw").attr("id");AIEL.LongArithmetic.config[a]={type:"addition",randomtype:false,range:"9",fromrange:1,totalFrame:10,current_frame:1,keypad:true,keypadType:"calculator",autoNavigate:"true",equationDirection:"horizontal",a:0,b:0,answer:0,correctScore:0,wrongScore:0,custom:false,addendedrows:2,customaddendtext:"",dividendrange:0,divisorrange:0,multiplicandrange:0,multiplierrange:0,savereport:"no",};AIEL.LongArithmetic.config[a].type=$(this).find(".arithmetic-setup-i-rw .type").text();AIEL.LongArithmetic.config[a].totalFrame=parseInt($(this).find(".arithmetic-setup-i-rw .frame-set").text());AIEL.LongArithmetic.config[a].range=parseInt($(this).find(".arithmetic-setup-i-rw .range").text().split("-")[1]);AIEL.LongArithmetic.config[a].fromrange=parseInt($(this).find(".arithmetic-setup-i-rw .range").text().split("-")[0]);AIEL.LongArithmetic.config[a].keypad=JSON.parse($(this).find(".arithmetic-setup-i-rw .inbuilt-keypad").text());AIEL.LongArithmetic.config[a].keypadType=$($(this).find(".arithmetic-setup-i-rw .keypad-type").text());AIEL.LongArithmetic.config[a].autoNavigate=JSON.parse($(this).find(".arithmetic-setup-i-rw .auto-navigate").text());AIEL.LongArithmetic.config[a].equationDirection=$(this).find(".arithmetic-setup-i-rw .direction").text();AIEL.LongArithmetic.config[a].addendedrows=$(this).find(".arithmetic-setup-i-rw .addend-rows").text();AIEL.LongArithmetic.config[a].dividendrange=$(this).find(".arithmetic-setup-i-rw .dividend-range").text();AIEL.LongArithmetic.config[a].divisorrange=$(this).find(".arithmetic-setup-i-rw .divisor-range").text();AIEL.LongArithmetic.config[a].multiplicandrange=$(this).find(".arithmetic-setup-i-rw .multiplicand-range").text();AIEL.LongArithmetic.config[a].multiplierrange=$(this).find(".arithmetic-setup-i-rw .multiplier-range").text();AIEL.LongArithmetic.config[a].custom=JSON.parse($(this).find(".arithmetic-setup-i-rw .custom").text());AIEL.LongArithmetic.config[a].savereport=$(this).find(".arithmetic-setup-i-rw .savereport").text();if(AIEL.LongArithmetic.config[a].custom){AIEL.LongArithmetic.config[a].customaddendtext=$(this).find(".equation").text()}})},mobileDevices:function(a){var b=navigator.userAgent.match(/iPad/i)!=null||navigator.userAgent.match(/iPhone/i)!=null||navigator.userAgent.match(/iPod/i)!=null||navigator.userAgent.match(/android/i)!=null;if(b&&AIEL.LongArithmetic.config[a].keypad==true){$(".input-cell, .carry").attr("contenteditable","false")}return b},addend:{},longAddition:function(b){if(AIEL.LongArithmetic.config[b].type=="addition"){AIEL.LongArithmetic.addend[b]={};if(AIEL.LongArithmetic.config[b].addendedrows>2&&!AIEL.LongArithmetic.config[b].custom){for(var d=0;d<AIEL.LongArithmetic.config[b].addendedrows-2;d++){var c=Math.round(Math.random()*parseFloat(AIEL.LongArithmetic.config[b].range-AIEL.LongArithmetic.config[b].fromrange))+parseFloat(AIEL.LongArithmetic.config[b].fromrange);$("#"+b).find(".addend:eq(0)").after('<span class="addend">'+c+"</span>")}}else{if(AIEL.LongArithmetic.config[b].addendedrows>2&&AIEL.LongArithmetic.config[b].custom){for(var d=0;d<AIEL.LongArithmetic.config[b].addendedrows-2;d++){var c=AIEL.LongArithmetic.config[b].customaddendtext.split(" ")[d+1];if(c==undefined){c=0}$("#"+b).find(".operator.add").before('<span class="addend">'+c+"</span>")}}}var g=0;for(var d=0;d<AIEL.LongArithmetic.config[b].addendedrows;d++){g=g+parseInt($("#"+b).find(".addend:eq("+d+")").text())}AIEL.LongArithmetic.config[b].answer=g;var h=AIEL.LongArithmetic.config[b].answer.toString().length;$("#"+b).find(".sum").text("");for(var d=0;d<h;d++){var k='<span contenteditable="true" class="input-cell cell'+d+'" tabindex="'+d+'">&#8202;</span>';$("#"+b).find(".sum").append(k)}if(AIEL.LongArithmetic.config[b].answer>9){var e='<span class="carry-block" />';$("#"+b).find(".carry-block").remove();$("#"+b).find(".equation").prepend(e);for(var d=0;d<h;d++){var f='<span class="carry disabled" tabindex="'+d+'" contenteditable="true">&#8202;</span>';$("#"+b).find(".carry-block").append(f)}}$("#"+b).find(".equation .sum span.input-cell:last").addClass("selected-aie");$(".equation .sum").addClass("answer-row");var l=$("#"+b).find(".addend").length;for(var d=0;d<l;d++){AIEL.LongArithmetic.addend[b]["a"+d]=$("#"+b).find(".addend:eq("+d+")").text()}function a(o,q,m){var n="";for(var p=0;p<m-o.length;p++){n=n+"0"}AIEL.LongArithmetic.addend[b][q]=n+o}var j=AIEL.LongArithmetic.config[b].answer.toString().length;for(x in AIEL.LongArithmetic.addend[b]){a(AIEL.LongArithmetic.addend[b][x],x,j)}}},keyboardEnterNavigation:function(){var c;var a=0;var b=0;$(".equation .sum span, .equation .carry-block span").focus(function(){a=($(this).attr("tabindex"));c=$(this).parents(".arithmetic-i-rw").attr("id")});$(".equation .sum span, .equation .carry-block span").focusout(function(){});$(".equation .sum span").keyup(function(){var d=$(this).text();d=$.trim(d);var e=d.length;var f=0;for(x in AIEL.LongArithmetic.addend[c]){f=f+parseInt(AIEL.LongArithmetic.addend[c][x][a])}if(f+b>9&&e>0){$(this).parents(".equation").find(".carry-block span").removeClass("selected-aie");$(this).parents(".equation").find('.carry-block span[tabindex="'+(a-1)+'"]').removeClass("disabled");$(this).parents(".equation").find('.carry-block span[tabindex="'+(a-1)+'"]').addClass("selected-aie").focus();$(this).removeClass("selected-aie")}else{if(e>0){$(".sum span").removeClass("selected-aie");$(this).prev().addClass("selected-aie").focus()}}AIEL.LongArithmetic.isReport=$(this).parents(".arithmetic-i-rw").hasClass("report")?true:false;console.log(AIEL.LongArithmetic.isReport)});$(".equation .carry-block span").keyup(function(){var d=$(this).text();d=$.trim(d);var e=d.length;b=parseInt($(this).text());if(e>0){$(this).parents(".equation").find(".sum span").removeClass("selected-aie");$(this).parents(".equation").find('.sum span[tabindex="'+(a)+'"]').addClass("selected-aie").focus();$(this).removeClass("selected-aie")}AIEL.LongArithmetic.isReport=$(this).parents(".arithmetic-i-rw").hasClass("report")?true:false});$(".product .input-cell").keyup(function(){var e=$(this).text();e=$.trim(e);var d=parseInt($(this).parent(".product-row").attr("tabindex"));if(e.length>0){$(".equation .product span.selected-aie").prev().addClass("selected-aie").focus();$(".equation .product span.selected-aie").next().removeClass("selected-aie")}if($(this).is(":first-child")&&e.length>0){$(this).parents(".product").find(".input-cell").removeClass("selected-aie");$(this).parents(".product").find(".row"+(d+1)+" .input-cell:last").addClass("selected-aie").focus()}AIEL.LongArithmetic.isReport=$(this).parents(".arithmetic-i-rw").hasClass("report")?true:false});$(".difference .input-cell").keyup(function(){var d=$(this).text();d=$.trim(d);if(d.length>0){$(".equation .difference span.input-cell.selected-aie").prev().addClass("selected-aie").focus();$(".equation .difference span.input-cell.selected-aie").next().removeClass("selected-aie")}AIEL.LongArithmetic.isReport=$(this).parents(".arithmetic-i-rw").hasClass("report")?true:false})},longMultiplication:function(e){if(AIEL.LongArithmetic.config[e].type=="multiplication"){var d=new Object();var a=$("#"+e).find(".factor").length;for(var b=0;b<a;b++){d["f"+b]=parseInt($("#"+e).find(".factor:eq("+b+")").text())}d.product=d.f0*d.f1;d.rows=d.f1.toString().length;if(d.rows>1){for(var b=0;b<d.rows+1;b++){var c='<span class="product-row row'+b+'" tabindex="'+b+'"></span>';$("#"+e).find(".product").append(c)}}else{for(var b=0;b<d.rows;b++){var c='<span class="product-row row'+b+'" tabindex="'+b+'"></span>';$("#"+e).find(".product").append(c)}}for(var b=0;b<d.product.toString().length;b++){var c='<span class="input-cell cell'+b+'" contenteditable="true" tabindex="'+b+'">&#8202;</span>';$("#"+e).find(".product .product-row").append(c)}$("#"+e).find(".product .product-row:first .input-cell:last").addClass("selected-aie");$("#"+e).find(".product .product-row:last").addClass("answer-row")}},longDivision:function(g){if(AIEL.LongArithmetic.config[g].type=="division"){var j=new Object();j.dividend=parseInt($("#"+g).find(".dividend").text());j.divisor=parseInt($("#"+g).find(".divisor").text());j.quotient=j.dividend/j.divisor;var h=j.dividend.toString().length-1;j.rows=h*2;var f=$("#"+g).find(".quotient").clone();$("#"+g).find(".quotient").remove();$("#"+g).find(".equation").prepend(f);$("#"+g).find(".equation .divisor-block").remove();$("#"+g).find(".equation").append('<span class="divisor-block" />');for(var b=0;b<j.rows;b++){var c='<span class="divisor-row row'+b+'" tabindex="'+b+'"></span>';$("#"+g).find(".divisor-block").append(c)}for(var b=0;b<j.dividend.toString().length;b++){var c='<span class="input-cell cell'+b+'" contenteditable="true" tabindex="'+b+'">&#8202;</span>';$("#"+g).find(".divisor-row").append(c)}$("#"+g).find(".quotient").text("");for(var b=0;b<j.dividend.toString().length;b++){var c='<span class="q input-cell cell'+b+'" contenteditable="true" tabindex="'+b+'">&#8202;</span>';$("#"+g).find(".quotient").append(c)}var a=parseInt($("#"+g).find(".quotient .q").length)-j.quotient.toString().split(".")[0].length;for(var b=0;b<a;b++){$("#"+g).find(".quotient .q:eq("+b+")").css("visibility","hidden")}$("#"+g).find(".quotient").append('<span class="remainder" />');var e=j.dividend%j.divisor;if(e>0){for(var b=0;b<e.toString().length;b++){$("#"+g).find(".quotient .remainder").append('<span class="input-cell remainder-cell cell'+b+'" contenteditable="true" data-r="'+e.toString()[b]+'">&#8202;</span>')}AIEL.LongArithmetic.config[g].answer=j.quotient.toString().split(".")[0]+"."+e}$("#"+g).find(".quotient").addClass("answer-row");$("#"+g).find(".answer-row .input-cell:first-child").addClass("selected-aie")}},longSubtraction:function(a){if(AIEL.LongArithmetic.config[a].type=="subtraction"){$(".equation").each(function(){var c=new Object();c.minuend=parseInt($(this).find(".minuend").text());c.subtrahend=parseInt($(this).find(".subtrahend").text());c.difference=c.minuend-c.subtrahend;c.rows=c.difference.toString().length;$(this).find(".difference").text("");for(var b=0;b<c.rows;b++){var d='<span class="input-cell cell'+b+'" contenteditable="true" tabindex="'+b+'">&#8202;</span>';$(this).find(".difference").append(d)}$(this).find(".difference").addClass("answer-row");$(this).find(".difference .input-cell:last").addClass("selected-aie")})}},customInputEvaluation:function(c){if(AIEL.LongArithmetic.config[c].custom&&AIEL.LongArithmetic.config[c].type=="addition"){var b=$("#"+c).find(".equation").text();var a=b.split(" ");AIEL.LongArithmetic.config[c].a=parseInt(a[0]);AIEL.LongArithmetic.config[c].b=parseInt(a[a.length-1])}else{if(AIEL.LongArithmetic.config[c].custom&&AIEL.LongArithmetic.config[c].type=="multiplication"){AIEL.LongArithmetic.config[c].a=parseInt($("#"+c).find(".equation").text().split(" ")[0]);AIEL.LongArithmetic.config[c].b=parseInt($("#"+c).find(".equation").text().split(" ")[1])}else{if(AIEL.LongArithmetic.config[c].custom&&AIEL.LongArithmetic.config[c].type=="subtraction"){AIEL.LongArithmetic.config[c].a=parseInt($("#"+c).find(".equation").text().split(" ")[0]);AIEL.LongArithmetic.config[c].b=parseInt($("#"+c).find(".equation").text().split(" ")[1])}else{if(AIEL.LongArithmetic.config[c].custom&&AIEL.LongArithmetic.config[c].type=="division"){AIEL.LongArithmetic.config[c].a=parseInt($("#"+c).find(".equation").text().split(" ")[0]);AIEL.LongArithmetic.config[c].b=parseInt($("#"+c).find(".equation").text().split(" ")[1])}}}}},getDocumentReady:function(){var a=$(".exercise-i-rw.equation-i-rw").parents(".arithmetic-i-rw").length;for(var b=0;b<a;b++){var c=$(".exercise-i-rw.equation-i-rw").parents(".arithmetic-i-rw:eq("+b+")").attr("id");AIEL.LongArithmetic.customInputEvaluation(c);AIEL.LongArithmetic.Ready(c);AIEL.LongArithmetic.presentationLayout(c);AIEL.LongArithmetic.GenerateRanNums(c);AIEL.LongArithmetic.RenderRanNum(c);AIEL.LongArithmetic.longMultiplication(c);AIEL.LongArithmetic.longSubtraction(c);AIEL.LongArithmetic.evaluate(c);AIEL.LongArithmetic.navStatus(c);AIEL.LongArithmetic.longDivision(c);AIEL.LongArithmetic.longAddition(c);AIEL.LongArithmetic.generateKeyPad(c);AIEL.LongArithmetic.mobileDevices(c)}},saveReportTracker:function(d,j){var o=false;if(AIEL.LongArithmetic.config[d].savereport=="wrong"&&j==false){o=true}else{if(AIEL.LongArithmetic.config[d].savereport=="all"){o=true}else{o=false}}var p=new Date().toString().split(" ");var k=p[0];var q=p[1];var l=p[2];var h=p[3];var c=k+" "+q+" "+l+" "+h;var m=JSON.parse(localStorage.getItem("AllIn-Arithmetic"));var e=false;for(x in m){if(x==c){e=true}}AIEL.LongArithmetic.report=m?m:{};if(e==false){AIEL.LongArithmetic.report[c]={};AIEL.LongArithmetic.report[c]["totalcount"]=0;AIEL.LongArithmetic.report[c]["correctcount"]=0;AIEL.LongArithmetic.report[c]["wrongcount"]=0}if(o){var r=[];var s=[];if(AIEL.LongArithmetic.config[d].type=="addition"){var n=[];$("#"+d).find(".equation .addend").each(function(){r.push($(this).text())});$("#"+d).find(".equation .carry-block .carry").each(function(){n.push($(this).text())})}else{if(AIEL.LongArithmetic.config[d].type=="subtraction"){$("#"+d).find(".equation .minuend, .equation .subtrahend").each(function(){r.push($(this).text())})}else{if(AIEL.LongArithmetic.config[d].type=="multiplication"){$("#"+d).find(".equation .factor").each(function(){r.push($(this).text())});var i={};$("#"+d).find('.equation .product-row:not(".product-row.answer-row")').each(function(t){i["prow"+t]=[];$(this).find(".input-cell").each(function(){i["prow"+t].push($(this).text())})})}else{if(AIEL.LongArithmetic.config[d].type=="division"){$("#"+d).find(".equation .dividend, .equation .divisor").each(function(){r.push($(this).text())});var b={};$("#"+d).find(".equation .divisor-block .divisor-row").each(function(t){b["drow"+t]=[];$(this).find(".input-cell").each(function(){b["drow"+t].push($(this).text())})});var a=[];$("#"+d).find(".equation .answer-row .remainder .remainder-cell").each(function(t){a.push($(this).text())})}}}}$("#"+d).find('.equation .answer-row .input-cell:not(".remainder-cell")').each(function(){s.push($(this).text())});var f=new Date();var g="";g=g+f.getHours();g=g+f.getMinutes();g=g+f.getSeconds();g=g+f.getMilliseconds();AIEL.LongArithmetic.report[c][g]={};AIEL.LongArithmetic.report[c][g]["data"]=r;AIEL.LongArithmetic.report[c][g]["cdata"]=n?n:"";AIEL.LongArithmetic.report[c][g]["ansdata"]=s;AIEL.LongArithmetic.report[c][g]["prows"]=i?i:{};AIEL.LongArithmetic.report[c][g]["drows"]=b?b:{};AIEL.LongArithmetic.report[c][g]["remain"]=a?a:[];AIEL.LongArithmetic.report[c][g]["type"]=$("#"+d).find(".arithmetic-setup-i-rw .type").text();AIEL.LongArithmetic.report[c][g]["opsign"]=$("#"+d).find('.equation .operator:not(".operator.equal")').text()}AIEL.LongArithmetic.report[c]["totalcount"]=AIEL.LongArithmetic.report[c]["totalcount"]+1;if(j==true){AIEL.LongArithmetic.report[c]["correctcount"]=AIEL.LongArithmetic.report[c]["correctcount"]+1}else{AIEL.LongArithmetic.report[c]["wrongcount"]=AIEL.LongArithmetic.report[c]["wrongcount"]+1}localStorage.setItem("AllIn-Arithmetic",JSON.stringify(AIEL.LongArithmetic.report))},displayReportDates:function(){AIEL.LongArithmetic.report=JSON.parse(localStorage.getItem("AllIn-Arithmetic"))?JSON.parse(localStorage.getItem("AllIn-Arithmetic")):{};for(x in AIEL.LongArithmetic.report){$(".arithmetic-report-i-rw").append('<div class="report-by-date" data-reportdate="'+x+'"><h4 class="report-date" title="'+x+'">'+x+' <span class="delete-report">Remove</span></h4></div>')}if($.isEmptyObject(AIEL.LongArithmetic.report)){$(".arithmetic-report-i-rw").append('<p class="no-report"><span><i>You have no report saved</i>.</span> <span>Check your arithmetic settings and make sure report tracking option is configured correctly.</span> <span>And start your practice.</span></p>')}},generateReportMarks:function(f,e){var c=f;var d=AIEL.LongArithmetic.report[c]["totalcount"]?AIEL.LongArithmetic.report[c]["totalcount"]:0;var j=AIEL.LongArithmetic.report[c]["correctcount"]?AIEL.LongArithmetic.report[c]["correctcount"]:0;var a=AIEL.LongArithmetic.report[c]["wrongcount"]?AIEL.LongArithmetic.report[c]["wrongcount"]:0;var h=Math.floor((j/d)*100)?Math.floor((j/d)*100):0;var g=" <span>"+h+"%</span>";$(e).find(".report-block").remove();$(e).find("h4.report-date").after('<div class="report-block" />');var i='<p class="report-marksheet"><span class="total-count">Total tries: '+d+'</span> <span class="correct-count">Correct mark: '+j+'</span> <span class="wrong-count">Wrong mark: '+a+'</span> <span class="total-marks">Your marks: '+g+"</span></p>";$(e).find(".report-block").append(i);if(a<1&&d>0){var b='<p class="report-greet">Congratulations!</p> <p class="report-message">Your report of the date '+c+" is all 100% correct.</p>";$(e).find(".report-block").append(b)}},updateMarkSheet:function(d,a,e,b){if(e<1&&a>0){var c='<p class="report-greet">Congratulations!</p> <p class="report-message">Your report of the date '+b+" is 100%.</p>";$(d).find(".report-block").append(c)}},removeReportItem:function(a,d){if(d){var b=a.split("r")[1];var c=$("#"+a).parents(".report-by-date").attr("data-reportdate");var e=JSON.parse(localStorage.getItem("AllIn-Arithmetic"))?JSON.parse(localStorage.getItem("AllIn-Arithmetic")):{};delete e[c][b];e[c]["correctcount"]=e[c]["correctcount"]+1;e[c]["wrongcount"]=e[c]["wrongcount"]-1;AIEL.LongArithmetic.report=e?e:{};localStorage.setItem("AllIn-Arithmetic",JSON.stringify(AIEL.LongArithmetic.report));setTimeout(function(){var f=AIEL.LongArithmetic.report[c]["totalcount"]?AIEL.LongArithmetic.report[c]["totalcount"]:0;var g=AIEL.LongArithmetic.report[c]["correctcount"]?AIEL.LongArithmetic.report[c]["correctcount"]:0;var h=AIEL.LongArithmetic.report[c]["wrongcount"]?AIEL.LongArithmetic.report[c]["wrongcount"]:0;AIEL.LongArithmetic.generateReportMarks(c,$("#"+a).parents(".report-by-date"));$("#"+a).prev(".report-header").remove();$("#"+a).remove()},1000)}},deleteReport:function(a,b){var d=confirm("This will delete the whole reports and marks of this date "+a+". Are you sure?");if(d){var c=JSON.parse(localStorage.getItem("AllIn-Arithmetic"))?JSON.parse(localStorage.getItem("AllIn-Arithmetic")):{};delete c[a];AIEL.LongArithmetic.report=c?c:{};localStorage.setItem("AllIn-Arithmetic",JSON.stringify(AIEL.LongArithmetic.report));$(b).remove()}},clearAllReports:function(){var b=confirm("This will delete all your practice reports and marks saved till date. Are you sure?");if(b){$(".report-by-date").remove();localStorage.removeItem("AllIn-Arithmetic");var a=JSON.parse(localStorage.getItem("AllIn-Arithmetic"))?JSON.parse(localStorage.getItem("AllIn-Arithmetic")):{};AIEL.LongArithmetic.report=a?a:{};localStorage.setItem("AllIn-Arithmetic",JSON.stringify(AIEL.LongArithmetic.report))}},loadReportTracker:function(i,f){AIEL.LongArithmetic.report=JSON.parse(localStorage.getItem("AllIn-Arithmetic"))?JSON.parse(localStorage.getItem("AllIn-Arithmetic")):{};var g="addition";var d=new Date().toString().split(" ");var b=d[0];var e=d[1];var j=d[2];var h=d[3];var a=i;var k=AIEL.LongArithmetic.report[a];var c=[];for(x in AIEL.LongArithmetic.report[a]){if(x!="totalcount"&&x!="correctcount"&&x!="wrongcount"){c.push(x)}}AIEL.LongArithmetic.generateReportMarks(i,f);$.each(c,function(B,I){g=AIEL.LongArithmetic.report[a][I].type;AIEL.LongArithmetic.config["r"+I]={type:""};$(f).append('<div class="arithmetic-i-rw report" id="r'+I+'"><div class="equation-i-rw"><p class="equation" /></div></div>');var E=I.toString().split("")[0]+I.toString().split("")[1];var A=I.toString().split("")[2]+I.toString().split("")[3];var v=I.toString().split("")[4]+I.toString().split("")[5];$(f).find(".report:eq("+B+")").before('<h5 class="report-header" data-id="'+I+'">Activity: '+g+" | Time: "+E+":"+A+":"+v+"</h5>");var z=0;AIEL.LongArithmetic.config["r"+I]={answer:0};var H=AIEL.LongArithmetic.report[a][I]["data"];var F=AIEL.LongArithmetic.report[a][I]["ansdata"];if(g=="addition"){var l=AIEL.LongArithmetic.report[a][I]["cdata"];$(f).find(".report:eq("+B+") p.equation").append('<span class="carry-block" />');$.each(l,function(m,s){var J='<span class="carry" contenteditable="true" tabindex="'+m+'">'+s+"</span>";$(".arithmetic-report-i-rw").find(".report:eq("+B+") p.equation .carry-block").append(J)});$.each(H,function(m,J){var s='<span class="addend">'+J+"</span>";$(f).find(".report:eq("+B+") p.equation").append(s);z=z+parseInt(J)});$(f).find(".report:eq("+B+") p.equation").append('<span class="sum answer-row" />');$(f).find(".report:eq("+B+") p.equation .addend:last").before('<span class="operator subtract">'+AIEL.LongArithmetic.report[a][I]["opsign"]+"</span> ")}if(g=="subtraction"){$(f).find(".report:eq("+B+") p.equation").append('<span class="minuend">'+H[0]+"</span>");$(f).find(".report:eq("+B+") p.equation").append('<span class="subtrahend">'+H[1]+"</span>");z=parseInt(H[0])-parseInt(H[1]);$(f).find(".report:eq("+B+") p.equation").append('<span class="difference answer-row" />');$(f).find(".report:eq("+B+") p.equation .subtrahend").before('<span class="operator subtract">'+AIEL.LongArithmetic.report[a][I]["opsign"]+"</span> ")}if(g=="multiplication"){$(f).find(".report:eq("+B+") p.equation").append('<span class="factor">'+H[0]+"</span>");$(f).find(".report:eq("+B+") p.equation").append('<span class="factor">'+H[1]+"</span>");$(f).find(".report:eq("+B+") p.equation").append('<span class="product"></span>');var w=AIEL.LongArithmetic.report[a][I]["prows"];var q=0;for(x in w){$(f).find(".report:eq("+B+") p.equation .product").append('<span class="product-row row'+q+'"></span>');$.each(w[x],function(J,s){var m='<span class="input-cell" contenteditable="true" tabindex="'+J+'">'+s+"</span>";$(f).find(".report:eq("+B+") p.equation .product-row:eq("+q+")").append(m)});q++}$(f).find(".report:eq("+B+") p.equation .factor:eq(1)").before('<span class="operator multiply">'+AIEL.LongArithmetic.report[a][I]["opsign"]+"</span> ");z=parseInt(H[0])*parseInt(H[1]);$(f).find(".report:eq("+B+") p.equation .product").append('<span class="product-row answer-row" />')}if(g=="division"){$(f).find(".report:eq("+B+") p.equation").append('<span class="dividend">'+H[0]+"</span>");$(f).find(".report:eq("+B+") p.equation").append('<span class="divisor">'+H[1]+"</span>");$(f).find(".report:eq("+B+") p.equation").append('<span class="divisor-block"></span>');var n=AIEL.LongArithmetic.report[a][I]["drows"];var q=0;for(x in n){$(f).find(".report:eq("+B+") p.equation .divisor-block").append('<span class="divisor-row row'+q+'"></span>');$.each(n[x],function(J,s){var m='<span class="input-cell" contenteditable="true" tabindex="'+J+'">'+s+"</span>";$(f).find(".report:eq("+B+") p.equation .divisor-row:eq("+q+")").append(m)});q++}$(f).find(".report:eq("+B+") p.equation .divisor").before('<span class="operator divide">'+AIEL.LongArithmetic.report[a][I]["opsign"]+"</span> ");z=parseInt(H[0])*parseInt(H[1]);$(f).find(".report:eq("+B+") p.equation").prepend('<span class="quotient answer-row" />');var t=parseInt(H[0])%parseInt(H[1]);z=parseInt(H[0])/parseInt(H[1]);z=z.toString().split(".")[0]+"."+t}AIEL.LongArithmetic.config["r"+I].answer=z;$.each(F,function(m,s){var J='<span class="input-cell" tabindex="'+m+'" contenteditable="true">'+s+"</span>";$(f).find(".report:eq("+B+") p.equation .answer-row").append(J)});$(f).find(".report:eq("+B+") div.equation-i-rw").append('<button class="reset">Reset</button>');if(g=="division"){$(f).find(".report:eq("+B+") p.equation .answer-row").append('<span class="remainder" />');var p=AIEL.LongArithmetic.report[a][I]["remain"];$.each(p,function(s,m){var J='<span class="input-cell remainder-cell cell'+s+'" contenteditable="true">'+m+"</span>";$(f).find(".report:eq("+B+") p.equation .answer-row .remainder").append(J)});$(f).find(".report:eq("+B+') p.equation .answer-row .input-cell:not(".remainder-cell")').addClass("q");var G=parseInt($("#r"+I).find(".quotient .q").length)-z.toString().split(".")[0].length;for(var D=0;D<G;D++){$("#r"+I).find(".quotient .q:eq("+D+")").css("visibility","hidden")}}var o=$(".report:eq("+B+")");var u=true;AIEL.LongArithmetic.checkAnswers(o,u);AIEL.LongArithmetic.config["r"+I].keypad=true;AIEL.LongArithmetic.generateKeyPad("r"+I);AIEL.LongArithmetic.config["r"+I].type=g;if(g=="addition"){AIEL.LongArithmetic.addend["r"+I]={};var C=$(f).find(".addend").length;for(var D=0;D<C;D++){AIEL.LongArithmetic.addend["r"+I]["a"+D]=$(f).find(".addend:eq("+D+")").text()}function r(J,L,m){var s="";for(var K=0;K<m-J.length;K++){s=s+"0"}AIEL.LongArithmetic.addend["r"+I][L]=s+J}var y=AIEL.LongArithmetic.config["r"+I].answer.toString().length;for(x in AIEL.LongArithmetic.addend["r"+I]){r(AIEL.LongArithmetic.addend["r"+I][x],x,y)}}})},getUniqueName:function(){var e=window.location.pathname;var d="AriTestAns";var c=e.split("/");var b=c[c.length-1];var a=b+"::"+d;return a},saveAPanswer:function(){var a=AIEL.LongArithmetic.getUniqueName();localStorage.setItem(a,JSON.stringify(AIEL.LongArithmetic.apdata))},loadAPanswer:function(){var a=AIEL.LongArithmetic.getUniqueName();AIEL.LongArithmetic.apdata=JSON.parse(localStorage.getItem(a))?JSON.parse(localStorage.getItem(a)):{};var b=[];for(x in AIEL.LongArithmetic.apdata){var c=AIEL.LongArithmetic.apdata[x];var d=x.toString().split("_")[0];if(c){$("#"+d).find(".sum-i-rw .sum-rw[contenteditable], .product-i-rw .product-rw[contenteditable], .quotient-i-rw .quotient-rw[contenteditable], .difference-i-rw .difference-rw[contenteditable]").text(c)}AIEL.LongArithmetic.checkAPanswer(d)}},checkAPanswer:function(a){var f=$("#"+a).find(".answer-i-rw").text();var e=$("#"+a).find(".sum-i-rw .sum-rw[contenteditable], .product-i-rw .product-rw[contenteditable], .quotient-i-rw .quotient-rw[contenteditable], .difference-i-rw .difference-rw[contenteditable]").text();var c=$.isNumeric(e);var d=false;e=e.replace(/[\u200B-\u200D\uFEFF]/g,"");e=$.trim(e);if(e.length>0){if(f===e){d=true;$("#"+a).find(".sum-i-rw .sum-rw[contenteditable], .product-i-rw .product-rw[contenteditable], .quotient-i-rw .quotient-rw[contenteditable], .difference-i-rw .difference-rw[contenteditable]").parents("tr, p").addClass("correct");$("#"+a).find(".sum-i-rw .sum-rw[contenteditable], .product-i-rw .product-rw[contenteditable], .quotient-i-rw .quotient-rw[contenteditable], .difference-i-rw .difference-rw[contenteditable]").parents("tr, p").removeClass("wrong");$("#"+a).find(".correct").show();$("#"+a).find(".wrong").hide()}else{d=false;$("#"+a).find(".sum-i-rw .sum-rw[contenteditable], .product-i-rw .product-rw[contenteditable], .quotient-i-rw .quotient-rw[contenteditable], .difference-i-rw .difference-rw[contenteditable]").parents("tr, p").addClass("wrong");$("#"+a).find(".sum-i-rw .sum-rw[contenteditable], .product-i-rw .product-rw[contenteditable], .quotient-i-rw .quotient-rw[contenteditable], .difference-i-rw .difference-rw[contenteditable]").parents("tr, p").removeClass("correct");$("#"+a).find(".wrong").show();$("#"+a).find(".correct").hide()}var b=a+"_in0";AIEL.LongArithmetic.apdata[b]=e;AIEL.LongArithmetic.saveAPanswer()}},deleteAPanswer:function(){var a=AIEL.LongArithmetic.getUniqueName();localStorage.removeItem(a);var b=JSON.parse(localStorage.getItem(a))?JSON.parse(localStorage.getItem(a)):{};AIEL.LongArithmetic.apdata=b?b:{};localStorage.setItem(a,JSON.stringify(AIEL.LongArithmetic.apdata));$(".arithmetic-rw").find(".sum-i-rw .sum-rw[contenteditable], .product-i-rw .product-rw[contenteditable], .quotient-i-rw .quotient-rw[contenteditable], .difference-i-rw .difference-rw[contenteditable]").html("&#8202;");$(".arithmetic-rw").find(".sum-i-rw .sum-rw[contenteditable], .product-i-rw .product-rw[contenteditable], .quotient-i-rw .quotient-rw[contenteditable], .difference-i-rw .difference-rw[contenteditable]").parents("tr, p").removeClass("correct wrong");$(".arithmetic-rw").find(".correct, .wrong").hide()},deleteAPItemanswer:function(b){var c=AIEL.LongArithmetic.getUniqueName();var d=JSON.parse(localStorage.getItem(c))?JSON.parse(localStorage.getItem(c)):{};var a=b+"_in0";delete d[a];AIEL.LongArithmetic.apdata=d?d:{};localStorage.setItem(c,JSON.stringify(AIEL.LongArithmetic.apdata));$("#"+b).find(".sum-i-rw .sum-rw[contenteditable], .product-i-rw .product-rw[contenteditable], .quotient-i-rw .quotient-rw[contenteditable], .difference-i-rw .difference-rw[contenteditable]").html("&#8202;");$("#"+b).find(".sum-i-rw .sum-rw[contenteditable], .product-i-rw .product-rw[contenteditable], .quotient-i-rw .quotient-rw[contenteditable], .difference-i-rw .difference-rw[contenteditable]").parents("tr, p").removeClass("correct wrong");$("#"+b).find(".correct, .wrong").hide()},trimAPTextEntryFields:function(){$(".arithmetic-rw").each(function(){var b=$(this).attr("id");var a=$(this).find(".sum-i-rw .sum-rw[contenteditable], .product-i-rw .product-rw[contenteditable], .quotient-i-rw .quotient-rw[contenteditable], .difference-i-rw .difference-rw[contenteditable]").text();a=a.replace(/[\u200B-\u200D\uFEFF]/g,"");a=$.trim(a);if(a.length<1){$(this).find(".sum-i-rw .sum-rw[contenteditable], .product-i-rw .product-rw[contenteditable], .quotient-i-rw .quotient-rw[contenteditable], .difference-i-rw .difference-rw[contenteditable]").html("&#8203;")}else{if(a.length>0){AIEL.LongArithmetic.checkAPanswer(b)}}})}};$(document).ready(function(){AIEL.LongArithmetic.init()});