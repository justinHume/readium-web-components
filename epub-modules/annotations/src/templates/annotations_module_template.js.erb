var EpubAnnotationsModule = function(offsetTopAddition, offsetLeftAddition, readerBoundElement, bbPageSetView) {
    
    var EpubAnnotations = {};

    // Rationale: The order of these matters
    <%= highlight %>
    <%= highlight_group %> 
    <%= underline %>
    <%= underline_group %> 
    <%= bookmark %>
    <%= annotations %>
    <%= bookmark_view %>
    <%= highlight_view %>
    <%= underline_view %> 
    <%= image_annotation %> 

    var annotations = new EpubAnnotations.Annotations({
        offsetTopAddition : offsetTopAddition, 
        offsetLeftAddition : offsetLeftAddition, 
        readerBoundElement : readerBoundElement,
        bbPageSetView : bbPageSetView
    });

    // Description: The public interface
    return {

        addBookmark : function (CFI, targetElement, id, offsetTop, offsetLeft) { 
            return annotations.addBookmark(CFI, targetElement, id, offsetTop, offsetLeft); 
        },
        getBookmark : function (id) { 
            return annotations.getBookmark(id); 
        },
        getBookmarks : function () { 
            return annotations.getBookmarks(); 
        }, 
        addHighlight : function (CFI, highlightedTextNodes, id, offsetTop, offsetLeft) { 
            return annotations.addHighlight(CFI, highlightedTextNodes, id, offsetTop, offsetLeft); 
        },
        getHighlight : function (id) { 
            return annotations.getHighlight(id); 
        },
        getHighlights : function () { 
            return annotations.getHighlights(); 
        },
        addUnderline : function (CFI, underlinedTextNodes, id, offsetTop, offsetLeft) { 
            return annotations.addUnderline(CFI, underlinedTextNodes, id, offsetTop, offsetLeft); 
        },
        getUnderline : function (id) { 
            return annotations.getUnderline(id); 
        },
        getUnderlines : function () { 
            return annotations.getUnderlines();
        },
        getImageAnnotation : function () {

        },
        getImageAnnotations : function () {

        },
        addImageAnnotation : function (CFI, imageNode, id) {
            return annotations.addImageAnnotation(CFI, imageNode, id);
        },
        redrawAnnotations : function (offsetTop, offsetLeft) { 
            return annotations.redrawAnnotations(offsetTop, offsetLeft); 
        }
    };
};