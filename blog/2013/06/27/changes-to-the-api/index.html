
<!DOCTYPE html>
<!--[if IEMobile 7 ]><html class="no-js iem7"><![endif]-->
<!--[if lt IE 9]><html class="no-js lte-ie8"><![endif]-->
<!--[if (gt IE 8)|(gt IEMobile 7)|!(IEMobile)|!(IE)]><!--><html class="no-js" lang="en"><!--<![endif]-->
<head>
  <meta charset="utf-8">
  <title>Changes to the Readium.js API - Readium.js</title>
  <meta name="author" content="Justin Hume">
  <link rel="author" href="humans.txt">
  <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">

  
    
  
  <meta name="description" content="With some recent additions to Readium.js, the &#8220;structure&#8221; of the API has been framed out. Since the next step in the evolution of the &hellip;">
  
  <!-- http://t.co/dKP3o1e -->
  <meta name="HandheldFriendly" content="True">
  <meta name="MobileOptimized" content="320">
  <meta name="viewport" content="width=device-width, initial-scale=1">

  
  <link rel="canonical" href="http://justinHume.github.io/readium-web-components/blog/2013/06/27/changes-to-the-api/">
  <link href="/readium-web-components/favicon.png" rel="icon">
  <link href='http://fonts.googleapis.com/css?family=Cantarell' rel='stylesheet' type='text/css'>
  <link href="/readium-web-components/stylesheets/screen.css" media="screen, projection" rel="stylesheet" type="text/css">
  <link href="/readium-web-components/atom.xml" rel="alternate" title="Readium.js" type="application/atom+xml">
  <meta name="og:type" content="website" />
  <meta name="og:site_name" content="Readium.js" />
  <meta name="og:title" content="Changes to the Readium.js API" />
  <meta name="og:description" content="With some recent additions to Readium.js, the &#8220;structure&#8221; of the API has been framed out. Since the next step in the evolution of the &hellip;" />
  <meta name="og:url" content="http://justinHume.github.io/readium-web-components/blog/2013/06/27/changes-to-the-api/"/>
  <meta name="url" content="http://justinHume.github.io/readium-web-components/blog/2013/06/27/changes-to-the-api/">
  
  <meta name="subject" content=""/>
  <meta name="category" content=""/>
  
  <meta name="distribution" content="global">
  <!--Fonts from Google"s Web font directory at http://google.com/webfonts -->
<link href="http://fonts.googleapis.com/css?family=PT+Serif:regular,italic,bold,bolditalic" rel="stylesheet" type="text/css">
<link href="http://fonts.googleapis.com/css?family=PT+Sans:regular,italic,bold,bolditalic" rel="stylesheet" type="text/css">

  

</head>

<body   >
  <nav role="navigation"><div class="navbar">
  <div class="navbar-inner">
    <a class="brand" href="/readium-web-components/">Readium.js</a>
    <ul class="nav">
      <li><a href="/readium-web-components/">Home</a></li>
      <li><a href="/readium-web-components/blog/archives">Archives</a></li>
    </ul>
    <ul class="nav" data-subscription="rss">
      <li><a href="/readium-web-components/atom.xml" rel="subscribe-rss" title="subscribe via RSS">RSS</a></li>
      
    </ul>
      
    <form class="navbar-form" action="http://google.com/search" method="get">
      <fieldset role="search">
        <input type="hidden" name="q" value="site:justinHume.github.io/readium-web-components" />
        <input class="span2" type="text" name="q" results="0" placeholder="Search"/>
      </fieldset>
    </form>
      
    
  </div>
</div>
</nav>
  <div class="wrapper_single">
    <div class="container">
      <article class="span8 offset2" role="article">
        <div class="article-format">

  <header>
    
      <h1 class="entry-title">Changes to the Readium.js API</h1>
    
    
      <p class="meta">
        
  


  
    <span class="byline author vcard">by <span class="fn"><a href="http://github.com/justinHume">Justin Hume</a></span></span>
  

 - 
        








  


<time datetime="2013-06-27T14:45:00-07:00" pubdate data-updated="true">Jun 27<span>th</span>, 2013</time> - 
        


        
      </p>
    
  </header>


  <div class="entry-content"><p>With some recent additions to Readium.js, the &#8220;structure&#8221; of the API has been framed out. Since the next step in the evolution of the API will be to elicit feedback, I think it&#8217;s a good time to talk about the structure of the Readium.js API, recent changes, and future directions.</p>

<!--more-->


<h2>The Readium.js API</h2>

<p>Readium.js enables the embedding of an EPUB content viewer in a variety of different web applications. As you might expect, the surrounding application will need to call methods on the viewer directly, listen for interesting events triggered by changes in the viewer&#8217;s state, and customize visual aspects of the viewer and EPUB content.</p>

<h3>API Structure</h3>

<p>When I talk about the <em>structure</em> of the API, I mean that the API has three major structural components that allow users to:</p>

<ul>
<li>Listen for events and bind callbacks to them (Event API)</li>
<li>Customize visual elements (Custom Style API)</li>
<li>Call methods to interact with the EPUB viewer (Method API)</li>
</ul>


<p>As I&#8217;ll describe shortly, the structure of the API should - and is - designed to evolve as functionality, events, and customizability are added to the Readium.js feature set.</p>

<h2>Recent Changes</h2>

<p>The previous version (0.0.1) of Readium.js implemented the method API, provided two events, and did not implement the Custom Style API. Version 0.0.2 of Readium.js now provides a more complete API structure. There have been major changes to the Event API and the Custom Style API has been added.</p>

<h3>Event API</h3>

<p>Readium.js now provides a set of events that users can bind callbacks to, using the &#8220;on&#8221; method:</p>

<figure class='code'><figcaption><span>Event API </span></figcaption>
 <div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
</pre></td><td class='code'><pre><code class='javascript'><span class='line'>    <span class="nx">readiumJs</span><span class="p">.</span><span class="nx">on</span><span class="p">(</span><span class="s2">&quot;atNextPage&quot;</span><span class="p">,</span> <span class="kd">function</span> <span class="p">()</span> <span class="p">{</span>
</span><span class='line'>
</span><span class='line'>        <span class="c1">// Do something when the viewer has rendered the next page </span>
</span><span class='line'>        <span class="c1">//  in the reading order</span>
</span><span class='line'>    <span class="p">},</span> <span class="k">this</span><span class="p">);</span>
</span><span class='line'>
</span><span class='line'>    <span class="nx">readiumJs</span><span class="p">.</span><span class="nx">on</span><span class="p">(</span><span class="s2">&quot;atLastPage&quot;</span><span class="p">,</span> <span class="kd">function</span> <span class="p">()</span> <span class="p">{</span>
</span><span class='line'>
</span><span class='line'>        <span class="c1">// Do something when the viewer has rendered the last page </span>
</span><span class='line'>        <span class="c1">//  in the EPUB publication</span>
</span><span class='line'>    <span class="p">},</span> <span class="k">this</span><span class="p">);</span>
</span></code></pre></td></tr></table></div></figure>


<p>Check out the <a href="http://readium.github.io/Readium-Web-Components/get-started/api.html">API documentation</a> for the set of events currently provided by different Readium.js modules.</p>

<p>My expectation is that as Readium.js evolves, more and more events can and will be provided. For example:</p>

<ul>
<li>Events that are triggered before and after Readium.js fetches EPUB content from the web</li>
<li>Events for style changes etc.</li>
<li>Events for specific content being displayed (images etc.)</li>
<li>Many more..</li>
</ul>


<p>Feedback on the types of events you&#8217;d like to see is encouraged (justinh@evidentpoint.com).</p>

<h3>Custom Style API</h3>

<p>Readium.js now provides a method to set the visual characteristics of the EPUB viewer and content. This part of the API also provides a set of defaults that can be used out of the box. The &#8220;customize&#8221; method provides the mechanism for setting styles:</p>

<figure class='code'><figcaption><span>Custom Style API </span></figcaption>
 <div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
<span class='line-number'>12</span>
<span class='line-number'>13</span>
<span class='line-number'>14</span>
<span class='line-number'>15</span>
</pre></td><td class='code'><pre><code class='javascript'><span class='line'>    <span class="c1">// Set a custom style with a default</span>
</span><span class='line'>    <span class="nx">readiumJs</span><span class="p">.</span><span class="nx">customize</span><span class="p">(</span><span class="s2">&quot;page-border&quot;</span><span class="p">,</span> <span class="s2">&quot;box-shadow&quot;</span><span class="p">);</span>
</span><span class='line'>
</span><span class='line'>    <span class="c1">// Set a custom style with your own CSS</span>
</span><span class='line'>    <span class="nx">readiumJs</span><span class="p">.</span><span class="nx">customize</span><span class="p">(</span><span class="s2">&quot;page-border&quot;</span><span class="p">,</span> <span class="p">{</span>
</span><span class='line'>        <span class="s2">&quot;border-style&quot;</span> <span class="o">:</span> <span class="s2">&quot;solid&quot;</span><span class="p">,</span>
</span><span class='line'>        <span class="s2">&quot;border-color&quot;</span> <span class="o">:</span> <span class="s2">&quot;red&quot;</span><span class="p">,</span>
</span><span class='line'>        <span class="s2">&quot;border-width&quot;</span> <span class="o">:</span> <span class="s2">&quot;10px&quot;</span>
</span><span class='line'>    <span class="p">});</span>
</span><span class='line'>
</span><span class='line'>    <span class="c1">// Chain custom styles</span>
</span><span class='line'>    <span class="nx">readiumJs</span>
</span><span class='line'>        <span class="p">.</span><span class="nx">customize</span><span class="p">(</span><span class="s2">&quot;page-border&quot;</span><span class="p">,</span> <span class="s2">&quot;box-shadow&quot;</span><span class="p">)</span>
</span><span class='line'>        <span class="p">.</span><span class="nx">customize</span><span class="p">(</span><span class="s2">&quot;spine-divider&quot;</span><span class="p">,</span> <span class="s2">&quot;box-shadow&quot;</span><span class="p">)</span>
</span><span class='line'>        <span class="p">...;</span>
</span></code></pre></td></tr></table></div></figure>


<p>Check out the <a href="http://readium.github.io/Readium-Web-Components/get-started/api.html">API documentation</a> for the set of customizable elements and defaults provided by Readium.js modules. The customize method, like the &#8220;on&#8221; method, is implemented such that new custom styles can be added in the future, without disrupting current users of the API.</p>

<p>For example, page transitions and loading animations will likely be provided at some point:</p>

<figure class='code'><figcaption><span>add a page transition </span></figcaption>
 <div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
</pre></td><td class='code'><pre><code class='javascript'><span class='line'>    <span class="nx">readiumJs</span>
</span><span class='line'>        <span class="p">.</span><span class="nx">customize</span><span class="p">(</span><span class="s2">&quot;page-transition&quot;</span><span class="p">,</span> <span class="s2">&quot;slide&quot;</span><span class="p">)</span>
</span><span class='line'>        <span class="p">.</span><span class="nx">customize</span><span class="p">(</span><span class="s2">&quot;loading-animation&quot;</span><span class="p">,</span> <span class="s2">&quot;spinning-wheel&quot;</span><span class="p">);</span>
</span></code></pre></td></tr></table></div></figure>


<h2>Evolution of the API</h2>

<p>Now that the structure of the API has now been established, I think it&#8217;s time to get some feedback on how the API should evolve. The project is very open to changes in the API at the moment. To get you started, I think there are a number of things to consider in this regard.</p>

<h3>Methods, events, custom style defaults</h3>

<p>First, suggestions for additional methods and events are welcome. This is fairly straightforward. Also, if you have some design chops, helping out with some custom style defaults would be great.</p>

<h3>Experiment with the Custom Style API</h3>

<p>The Custom Style API is fairly experimental at the moment. In particular, the API allows users to provide their own CSS to style specific elements in the viewer. While I feel fairly certain that providing a set of defaults is going to be useful, I&#8217;m not sure that the ability to set custom CSS will work.</p>

<p>There are few restrictions on the CSS that you can provide to the &#8220;customize&#8221; method, but I&#8217;m sure there are lot of ways to break the viewer. It may also be difficult for users to reason about their own custom styles, given that the elements they&#8217;re styling in Readium.js are in somewhat of a black box.</p>

<p>That being said, it may make sense to drop the ability to provide custom CSS, provide a white-list or black-list of CSS that can be applied, or just leave it as a free-for-all. Once again, feedback would be greatly appreciated.</p>

<p>If you&#8217;d like to provide feedback of any kind, either email me (justinh@evidentpoint.com) or add an issue to the Github <a href="https://github.com/readium/Readium-Web-Components/issues?state=open">issue tracker</a>.</p>
</div>


  <footer>
    <p class="meta">
      
  


  
    <span class="byline author vcard">by <span class="fn"><a href="http://github.com/justinHume">Justin Hume</a></span></span>
  


      








  


<time datetime="2013-06-27T14:45:00-07:00" pubdate data-updated="true">Jun 27<span>th</span>, 2013</time>
      


    </p>
    
      <div class="share">
	<div class="addthis_toolbox addthis_default_style ">
	
	
	<a class="addthis_button_tweet"></a>
	
	
	<a class="addthis_counter addthis_pill_style"></a>
	</div>
  <script type="text/javascript" src="http://s7.addthis.com/js/250/addthis_widget.js#pubid="></script>
</div>

    
    
      <a class="pull-left" href="/blog/2013/05/29/welcome-to-readium-js/" title="Previous Post: Welcome to Readium.js">&laquo; Welcome to Readium.js</a>
    
    
      <a class="pull-right" href="/blog/2013/06/27/roadmap/" title="Next Post: Readium.js Roadmap">Readium.js Roadmap &raquo;</a>
    
  </footer>

</div>

        
      </article>
    </div>
  </div>
  <div id="footer-widgets">
  <div class="container">
    <div class="row">
  <div class="span3">
    <h2>recent posts</h2>
    <ul class="recent_posts">
      
        <li>
          <a href="/readium-web-components/blog/2013/06/27/roadmap/">Readium.js Roadmap</a>
        </li>
      
        <li>
          <a href="/readium-web-components/blog/2013/06/27/changes-to-the-api/">Changes to the Readium.js API</a>
        </li>
      
        <li>
          <a href="/readium-web-components/blog/2013/05/29/welcome-to-readium-js/">Welcome to Readium.js</a>
        </li>
      
        <li>
          <a href="/readium-web-components/blog/2013/05/28/readium-js-development/">Readium.js development</a>
        </li>
      
    </ul>
    <h2><a href="/blog/archives">archives</a></h2>
  </div>
  <div class="span3">
    

  </div>
  <div class="span4">
    

  </div>
  <div class="span2">
    <!-- <h2>found on</h2>













 -->
  </div>
</div>

  </div>
</div>
<footer class="footer">
  <div class="container">
    <p class="pull-left">
  <a href="/readium-web-components/">Readium.js website and blog</a>
  - Copyright &copy; 2013 - <span>Created by <a href="http://github.com/justinHume">Justin Hume</a>.</span><!-- Justin Hume -->
</p>
<p class="pull-right">
  <span>Powered by <a href="http://octopress.org/">Octopress</a>.</span>
  
    <span>Designed by <a href="http://www.AdrianArtiles.com">Adrian Artiles</a>.</span>
  
</p>

  </div>
</footer>

  <script src="//ajax.googleapis.com/ajax/libs/jquery/1.7.2/jquery.min.js" type="text/javascript"></script>
<script>window.jQuery || document.write('<script src="/readium-web-components/javascripts/libs/jquery-1.7.2.min.js" type="text/javascript"><\/script>')</script>
<script src="/readium-web-components/javascripts/libs/bootstrap.min.js" type="text/javascript"></script>
<script src="/readium-web-components/javascripts/jquery.tweet.js" type="text/javascript"></script>
<script src="/readium-web-components/javascripts/jquery.instagram.js" type="text/javascript"></script>
<script src="/readium-web-components/javascripts/libs/jquery.masonry.min.js" type="text/javascript"></script>
<script src="/readium-web-components/javascripts/custom.js" type="text/javascript"></script>








  <script type="text/javascript">
    (function(){
      var twitterWidgets = document.createElement('script');
      twitterWidgets.type = 'text/javascript';
      twitterWidgets.async = true;
      twitterWidgets.src = 'http://platform.twitter.com/widgets.js';
      document.getElementsByTagName('head')[0].appendChild(twitterWidgets);
    })();
  </script>




</body>
</html>
